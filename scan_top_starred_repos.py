from requests import get
from core.interface import DataInterface

interface = DataInterface()
for page in range(1, 10001):  # fetch up to 30x10000
    url = f"https://api.github.com/search/repositories?q=stars:>1000&page={page}"
    for index, repo_url in enumerate(get(url).json()["items"], start=1):
        for status in interface.stream_process_repository(repo_url):
            print(page*30+index, repo_url, status)
